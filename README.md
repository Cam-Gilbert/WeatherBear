# ![image](https://github.com/user-attachments/assets/c27ca754-b79f-419f-8826-f06aca816853) [WeatherBear](https://weatherbear.org) - Learn the meteorology behind the forecast!

## About

WeatherBear is a weather website that focuses on explaining the meteorology behind the short term forecast. This is done by using the local NWS office area forecast discussions and summarizing them at different levels of expertise using OpenAI's API. There is also functionality that will explainconfusing portions of the discussion if the user desires. Forecast panels containing basic forecast information are contained to the right of the summary. There is also an email list that will email you summarized discussions every day at 
selected times, this was originally all WeatherBear was but I decided to turn it into a website as a learning experience and to make the tool more accessible as joining an email-list is a bit of a large commitment. Now, anyone can get custom forecast for anywhere serviced by the National Weather Service at anytime. 

## Functionality
### Area Forecast Discussion Summaries
The main functionality of the site is generating a custom summarized forecast discussion based on the closed nws office's area forecast discussion. The suary is currently done using OpenAI's gpt-4.1-mini model. These sumaries can be written at three different levels
"Expert", "Intermediate", "Novice" to make these area forecast discussions more accessible to people without meteorology backgrounds. There is also an option, "No sumary", if the user does not want the sumary at all. In this case the raw afd is displayed. An example
"Expert" summary is shown below.

> Forecast Summary for Raleigh
> 
> A weakening subtropical ridge centered south of Bermuda currently dominates the synoptic pattern, maintaining hot and humid conditions over central North Carolina today with modest diurnal convection focused along a surface trough in the Piedmont and Sandhills.
> This convection is supported by moderate instability and minimal convective inhibition in a moist environment with precipitable water near 2 inches. However, the influence of this ridge will wane as a positively tilted mid- to upper-level trough advances eastward from
> the central Plains through the Ohio Valley, accompanied by embedded convectively enhanced shortwaves and mesoscale convective vortices (MCVs). These features will enhance mid-level forcing for ascent over the region by Tuesday afternoon and evening, leading to more
> numerous showers and thunderstorms, especially across the southern and western Piedmont. The convective environment will be characterized by moderately strong southwesterly mid-level flow around 20 kt, deep moisture, and instability conducive to wet microbursts and
> urban flooding.
>
> Tonight, convection will diminish after sunset with residual isolated showers possible in the northwest Piedmont until midnight, followed by a generally quiet night with patchy fog development possible in the southern Piedmont and Sandhills due to radiational cooling
> under clearing skies or low stratus development. Tuesday night into Wednesday, the trailing cold front associated with the advancing trough will gradually move through, sustaining scattered convection primarily across the Piedmont with localized heavy rainfall potential
> due to embedded MCVs and slow frontal progression. This will lead to cooler temperatures Wednesday, with widespread cloud cover and precipitation keeping highs below normal. By late week, drier air associated with building surface high pressure will stabilize conditions
> and reduce precipitation chances, although model uncertainty remains regarding a possible low developing along the front near Florida, which could modulate eastern local precipitation late in the period.

### Explaining Confusing Sections of the Summary
There is also functionality for users to select portions of the summarized text they found confusing and a window will appear with an in-depth explanation targeted for their weather knowledge level. 
For this to occur the user must toggle the option by clicking it on the page.

![image](https://github.com/user-attachments/assets/41bb81e1-a852-41f2-bdee-3c8181fc1a82)

Then the user may select a piece of text and a summary will be generated. The example in the image is at the expert level from the example summary.

![image](https://github.com/user-attachments/assets/dd3b4c12-61cb-4622-910b-7dce637662ec)
> [!NOTE]
> It is important to note that these explanations are generated by AI, and they may not be 100% accurate, it is always important to double check information.
### Forecast Panels
The forecast panels are located to the right of the summary box on the homepage, they contain forecast information for the next few time periods. This includes hourly temperature, dewpoint, relative humidity, precipitation chances, and wind speed. These are displayed as 
time series plots that expand when the panel is clicked on. Before the plots appear the panel contains a brief text forecast, sky conditions, temperature, precip %, and wind speed. 

![image](https://github.com/user-attachments/assets/0ff8433e-de3c-4f5a-9aa4-363b7feda6b7)

### Email Bot
The email bot functionality was the first piece of this project I built, as I wanted to area forecast discussion emailed to me every morning. As I developed the summarizing component of the project, I decided to add that to the email bot as well and allow for people to
sign up for an email list. You can select up to 4 times a day to recieve an email with short-term forecast information and a summarized forecast discussion at any of the three weather knowledge levels listed previously "Expert", "Intermediate", and "Novice". An example 
email is shown below at the expert level, examples at the other levels can be found at [here](https://weatherbear.org/emailbot)

> Subject: üå¶Ô∏è Daily Weather Update, Cameron
> 
> Hello Cameron, it is currently 91 degrees F with a dewpoint of 69 F, for a feels-like temperature of 96 F at Raleigh / Durham, Raleigh-Durham International Airport with partly cloudy skies.
> 
> Today's Forecast:
> Tonight: Mostly clear, with a low around 75. Southwest wind around 7 mph.
> 
> Juneteenth: A chance of showers and thunderstorms after 2pm. Sunny, with a high near 96. Heat index values as high as 103. Southwest wind 8 to 12 mph, with gusts as high as 23 mph. Chance of precipitation is 40%. New rainfall amounts between a tenth and quarter of an
> inch possible.
> 
> Summarized forecast discussion:
>
> A strong synoptic cold front currently advancing from the Mississippi Valley will traverse central North Carolina Thursday into Thursday night, serving as the principal forcing mechanism for a well-organized severe convective outbreak. Ahead of the front, SBCAPE values
> are forecast to reach 2000‚Äì3000 J/kg, especially over the Coastal Plain and Piedmont regions, coupled with effective bulk shear of 25‚Äì35 kt, providing sufficient bulk shear to support organized multicell clusters or even transient supercells. This environment favors
> damaging wind gusts and hail, with a non-zero tornado threat embedded within the convective line. The timing places storm initiation in the NW Piedmont by early afternoon, with eastward progression through the Triangle mid-afternoon and reaching the Coastal Plain by
> evening. Convection will diminish overnight as the front stalls offshore. Prefrontal temperatures will remain hot and humid, with heat indices exceeding 100¬∞F in some areas.
> 
> Post-frontal conditions Friday will be comparatively cooler and less humid with subsiding diurnal convection limited mostly to the coastal fringe. However, high pressure building over the region this weekend will induce a pronounced warm-air advection pattern beneath a
> strengthening Bermuda High extending westward across the Mid-Atlantic. This synoptic ridge will promote a sustained heat wave, featuring daily maximum temperatures climbing into the mid- to upper 90s and heat indices rising to or above heat advisory criteria (105‚Äì109¬∞F) 
> by Monday and Tuesday. Overnight lows will remain elevated near record warm minimums due to persistent moist advection and boundary layer decoupling. Minimal precipitation is expected through early next week as the ridge suppresses convective initiation, aside from
> potential weak afternoon thunderstorms Wednesday in the western Piedmont, contingent on model consistency.
> 
> Stay weather aware!
> 
> &ndash; WeatherBear üêª

## How it Works
### Area Forecast Discussion Summaries
The area forecast discussion summaries are quite simple to make, the code essentially pulls the area forecast discussion from the closest nws office and then passes it into OpenAI's api where a chat is created and the summary is formed. The prompts can be seen in Summarizer.py. The prompt is slightly different for each weather knowledge level. 
### Explaining Confusing Sections of the Summary
Similar to the AFD Summaries, the selected portion of text that a user is confused is passed to the LLM along with the summarized message and the original afd for context. The llm is instructed to explain the section at a level based on the users weather knowledge level.
They are currently quite long, I am considering shortening the length of the explanations
### Email Bot
The email bot combines the functionality of the afd discussion summaries with other forecast and observation data pulled from the NWS api. This information is added to the emails to create a short forecast. This information is also what is placed in the forecast panels.
